# How we saved our customer thousands of $ during their NFT sales

check our article on https://blog.plaza.tech/

## getting started

make sure all the needed modules are present
on the contracts folder run this command

```
yarn && yarn compile
```

## How to deploy

you will need to enter either a private key **OR** a mnemonic seed inside the `.env` file under the contracts folder (you can take example on the `.sample-env` file) like so:

```
ACCOUNT_PRIVATE_KEY=44544f5d4s5ds4f54sd5f4sd4dfs30812c1e4393f575ce8266552b17b462b
MNEMONIC="merit coyote tattoo shrug bus toward minute another food empty design mom"
```

Note that a mnemonic seed that can be generated by a wallet like metamask. You can also export a private key from metamask

**IMPORTANT** If `ACCOUNT_PRIVATE_KEY` AND `MNEMONIC` are filled only the private key will be used as a signing account

you will also need an [ethereum Infura project ID](https://infura.io/dashboard/ethereum/) in the `.env` e.g. `INFURA=bfab2b96db65465465ds465d4s6d5`

## make sure the account has enough ETH

to make sure the right account is setup run this command

```
 yarn hardhat accounts --network rinkeby
```

The first address displayed will be used for the scripts

here are the prices you should expect with 167 gwei per gas fee.

![Prices](contract_call_prices.png)

## deploy BoredNFT on mainnet

inside `scripts/deploy.ts` make sure `BASE_URI` and `TEAM_ADDRESS` are correct.
**WARNING** `TEAM_ADDRESS` can't be changed afterwards and will be used to transfer all the ETH sitting on the contract after the sales is complete

you can then run the following command

```
 yarn deploy-mainnet
```

to deploy on rinkeby testnet

```
 yarn deploy-rinkeby
```

# Whitelist

when the presale is activated only the `whitelistSummon` function will work the `summon` function will not work until presale is over.
Moreover a maximum amount equal to `presaleReserved` can be minted during the whitelist
_to know if presale is activated, the current presaleReserved amount or to know how to deactivate it check the scripts below_

the `whitelistSummon` function takes another parameter which is the proof for the current address that it is whitelisted.
_to know if an address is whitelisted check the iswhitelisted script below_
_to modify the current whitelist and presaleReserved amount check the whitelist script below_

## how to generate proof to a whitelist

inside the `scripts` folder create a `whitelist.json` file containing an array of string addresses like so

```json
[
  "0xd1629474d25a63B1018FcC965e1d218A00F6CbD3",
  "0xB7D182271E67b43DdE93CC7966a52CA456C59C53",
  "0x3DFaCd79E9A4dE85B1b8Fb16A0C62dC6971424Fd"
]
```

and run the following command

```
yarn merkleProof
```

It will create a `merkleTreeProof.json` file inside the `deployments` folder containing all the proof for each one of the whitelisted addresses and the merkle tree root

```json
{
  "0xd1629474d25a63B1018FcC965e1d218A00F6CbD3": [
    "0x5fa73b27dd52d2b6e7a88d99d2cfbbced4946b5ac6b03fc40548eeaccbf90170",
    "0x7e3b54b89be9af7682ea8d5d2e8084ab1e4dacde13676b4f3e43c120bd2b957a"
  ],
  "0xB7D182271E67b43DdE93CC7966a52CA456C59C53": [
    "0x50dc193713d07994b6d68bedaa99906c546ab9db0def34cc052632ab6e8eb44f",
    "0x9f92f70ae6d17e8e2f8e8d8eb7727545a57da6c6829ab9ae5de6703f89ab65e7"
  ],
  "merkleRoot": "0xc182e9e2f56e67e8e1d840a7ab4ae0fbbe1ef720e4339adfb35b5048a5c0838b"
}
```

so if address `0xd1629474d25a63B1018FcC965e1d218A00F6CbD3` want to mint during the presale he will call the `whitelistSummon` function like this

```ts
await boredNFT.whitelistSummon(1, [
  '0x5fa73b27dd52d2b6e7a88d99d2cfbbced4946b5ac6b03fc40548eeaccbf90170',
  '0x7e3b54b89be9af7682ea8d5d2e8084ab1e4dacde13676b4f3e43c120bd2b957a',
]);
```

# Scripts

if you are not sure about the parameters you can ask for help e.g.

```
yarn hardhat pause --help
```

in all the following script the `--addr` is for the boredNFT smart contract address.

if you want to run the scripts on rinkeby testnet replace `--network mainnet` by `--network rinkeby`

## whitelist BoredNFT on mainnet

to check for whitelisted account the contract should have the `presale` flag set to `true`

 

the following command will check if an address is whitelisted

```
yarn hardhat iswhitelisted --adr 0xc9E745b1d6499458E32cce4332C6a3322F611810 --account 0x10F7798e29eF07e3EC72d641abb408Ada3e6e454  --proof "[\"0x6ea3fd58081d6f69ba0551a3a1cd0a1e1dc618ab256b74fe3c6d71c8fddaa9ab\",\"0x4458cb9cfcaa7840ed97117fc4f04ec0b3695dd5637ec225d645036fa58ce653\",\"0x84692e454d35f0d6fab4fa53f041de064bd3c669039ce08211824ac61af5bf6c\",\"0x40931fb4e6b274f734760a0da2008c438586b70f5d19de0e7399191e9b9af0da\",\"0x4a1238641e6bd7d68d1fa528f1dc8e20791a8b901bfdc2cbc710df8676e0e27c\",\"0x4854f35c6c9b995526385537c967d50631022db53ee5589b4bcc6316bbacd854\",\"0x5c73413277319462bcb542d05a1441e466a03890945beddb99d71e9bf53a60ae\",\"0xb6174075b56cdfb75f43ee1bfd884309803812949b7eee37a3a79a1757154fee\",\"0x3f184766f4e50d56e0e7f67dbe18c5ecb7f3b5f8664ea6fa29d01ecc3c25a3b3\",\"0xec89af8d26adc33ac83743ebb15703e47164eef91ebf9fa7a55d597d1334a86e\",\"0x9a90e004564e786d8a44bf175ac4c3ac419b5a6979066089bb62b156fdb1c09a\",\"0xe77c47127ba4eb1ee048f9c9da1aed67b81bbd625014617a499b196f13cd7780\",\"0xcbfda8d55caf4de012ade78b75dce36fc6c06e20c11070fb9c1378555859f891\"]" --network mainnet
```

the following command will update the whitelist merkle root and **set** the available nft amount to mint during the presale

```
yarn hardhat whitelist --adr 0x8e06b0C45d96D60214A7CCA755f41137a7a23D54 --merkleroot 0xb3006cf37ddb7584fc425fca66b0f63fe8c327ea99a512e9af0f4137627ea523 --amount 1000 --network mainnet
```

## pause unpause BoredNFT on mainnet

the following command will pause the boredNFT contract meaning minting for an average user will not be possible anymore

```
yarn hardhat pause --adr 0x72b9A62C3a010464DCbEF354d7d6427c93fDAFB1 --pause true --network mainnet
```

the following command will unpause the boredNFT contract meaning minting for an average user will be possible again

```
yarn hardhat pause --adr 0x72b9A62C3a010464DCbEF354d7d6427c93fDAFB1 --pause false --network mainnet
```
